{% extends 'base.html' %}
{% block content %}
<meta http-equiv="refresh" content="5">  <!-- Auto refresh every 5 seconds -->

<div class="container mt-5">
    <div class="card shadow p-4">
        <h3 class="text-center mb-4">ðŸ“Š Live Election Results</h3>

        <div class="text-end mb-3">
            <a href="{% url 'download_results' %}" class="btn btn-success">
                ðŸ“¥ Download Excel
            </a>
        </div>

        <table class="table table-bordered table-hover text-center">
            <thead class="table-dark">
                <tr>
                    <th>Rank</th>
                    <th>Candidate Name</th>
                    <th>Total Votes</th>
                </tr>
            </thead>
            <tbody>
                {% for candidate in candidates %}
                    <tr class="{% if forloop.first %}table-success{% endif %}">
                        <td>{{ forloop.counter }}</td>
                        <td>{{ candidate.name }}</td>
                        <td><strong>{{ candidate.votes }}</strong></td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="3">No candidates found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
